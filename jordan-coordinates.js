// إحداثيات المحافظات الأردنية الدقيقة
const jordanCoordinates = {
  governorates: {
    "عمان": {
      center: [31.5837, 36.3334],
      zoom: 10,
      areas: {
        "تلاع العلي": [31.9454, 35.8975],
        "جبل الحسين": [31.9515, 35.9239],
        "صويلح": [32.0234, 35.8567],
        "عبدون": [31.9525, 35.9249],
        "ماركا": [31.95, 36.00],
        "الجبيهة": [32.0167, 35.8833],
        "خريبة السوق": [31.9833, 35.9167],
        "أبو نصير": [31.9167, 35.8833],
        "الجويدة": [31.9000, 35.9500],
        "مرج الحمام": [31.7833, 35.9833],
        "ناعور": [31.8833, 35.8167],
        "وادي السير": [31.9167, 35.8167],
        "الشميساني": [31.9515, 35.9239],
        "جبل اللويبدة": [31.9583, 35.9333],
        "جبل النزهة": [31.9667, 35.9167]
      }
    },
    "إربد": {
      center: [32.5556, 35.8500],
      zoom: 10,
      areas: {
        "الحصن": [32.0234, 35.8567],
        "بشرى": [32.4167, 35.7000],
        "النعيمة": [32.01, 35.85],
        "الرمثا": [32.5583, 36.0083],
        "المزار الشمالي": [32.4833, 35.7000],
        "كفر أسد": [32.4167, 35.6833],
        "دير أبي سعيد": [32.3833, 35.6500],
        "سال": [32.3500, 35.6167],
        "الطيبة": [32.3167, 35.5833],
        "كفر يوبا": [32.2833, 35.5500]
      }
    },
    "الزرقاء": {
      center: [32.0722, 36.0881],
      zoom: 10,
      areas: {
        "الهاشمية": [32.0867, 36.0933],
        "الرصيفة": [32.0167, 36.0500],
        "الزرقاء الجديدة": [32.0833, 36.1167],
        "الضليل": [32.1167, 36.1500],
        "الأزرق": [31.8833, 36.8167],
        "خريبة السمرا": [32.1500, 36.2000],
        "الدليل الشرقي": [32.1833, 36.2333]
      }
    },
    "البلقاء": {
      center: [31.8889, 35.7278],
      zoom: 10,
      areas: {
        "السلط": [32.0333, 35.7333],
        "ماحص": [31.9167, 35.7833],
        "الفحيص": [32.0000, 35.7667],
        "عين الباشا": [32.0667, 35.8167],
        "الشونة الجنوبية": [31.8833, 35.6167],
        "دير علا": [32.1833, 35.6167],
        "الرامة": [32.1500, 35.6500],
        "زي": [31.9500, 35.8000]
      }
    },
    "جرش": {
      center: [32.2811, 35.8997],
      zoom: 11,
      areas: {
        "جرش": [32.2811, 35.8997],
        "برما": [32.3167, 35.9333],
        "الكتة": [32.2500, 35.8667],
        "ساكب": [32.3500, 35.9667]
      }
    },
    "عجلون": {
      center: [32.3328, 35.7517],
      zoom: 11,
      areas: {
        "عجلون": [32.3328, 35.7517],
        "كفرنجة": [32.3667, 35.7167],
        "عين جنا": [32.3000, 35.7833],
        "راسون": [32.2667, 35.7500],
        "الوهادنة": [32.4000, 35.7833]
      }
    },
    "مأدبا": {
      center: [31.7197, 35.7956],
      zoom: 11,
      areas: {
        "مأدبا": [31.7197, 35.7956],
        "ذيبان": [31.6833, 35.7333],
        "الفيصلية": [31.7500, 35.8333],
        "ليب": [31.6500, 35.7667],
        "الجيزة": [31.7833, 35.8667]
      }
    },
    "الكرك": {
      center: [31.1856, 35.7050],
      zoom: 10,
      areas: {
        "الكرك": [31.1856, 35.7050],
        "المزار الجنوبي": [31.0667, 35.6833],
        "الثنية": [31.2500, 35.7500],
        "عي": [31.1167, 35.6500],
        "مؤتة": [31.2833, 35.7833]
      }
    },
    "الطفيلة": {
      center: [30.8378, 35.6042],
      zoom: 11,
      areas: {
        "الطفيلة": [30.8378, 35.6042],
        "بصيرا": [30.7333, 35.5667],
        "الحسا": [30.9000, 35.6500],
        "غرندل": [30.7667, 35.6167],
        "عيمة": [30.8667, 35.6833]
      }
    },
    "معان": {
      center: [30.1953, 35.7342],
      zoom: 9,
      areas: {
        "معان": [30.1953, 35.7342],
        "الشوبك": [30.5333, 35.5667],
        "الجفر": [30.3167, 36.1833],
        "القادسية": [30.1500, 35.7000],
        "أيل": [30.0667, 35.6833]
      }
    },
    "العقبة": {
      center: [29.5267, 35.0067],
      zoom: 10,
      areas: {
        "العقبة": [29.5267, 35.0067],
        "القويرة": [29.3167, 35.3000],
        "الديسة": [29.4833, 35.2167],
        "وادي رم": [29.5833, 35.4167]
      }
    },
    "المفرق": {
      center: [32.3436, 36.2081],
      zoom: 9,
      areas: {
        "المفرق": [32.3436, 36.2081],
        "الرويشد": [32.5167, 38.2000],
        "البادية الشمالية الشرقية": [32.7000, 37.5000],
        "أم الجمال": [32.4000, 36.4000],
        "سما السرحان": [32.6000, 36.8000]
      }
    }
  },
  
  // إحداثيات مركز الأردن للعرض الافتراضي
  center: [31.963158, 35.930359],
  defaultZoom: 8,
  
  // حدود الأردن التقريبية
  bounds: {
    north: 33.3736,
    south: 29.1858,
    east: 39.3012,
    west: 34.9226
  }
};

// دالة للحصول على إحداثيات محافظة معينة
function getGovernorateCoordinates(governorateName) {
  return jordanCoordinates.governorates[governorateName] || null;
}

// دالة للحصول على إحداثيات منطقة معينة
function getAreaCoordinates(governorateName, areaName) {
  const governorate = jordanCoordinates.governorates[governorateName];
  if (governorate && governorate.areas[areaName]) {
    return governorate.areas[areaName];
  }
  return null;
}

// دالة لحساب المسافة بين نقطتين
function calculateDistance(lat1, lng1, lat2, lng2) {
  const R = 6371; // نصف قطر الأرض بالكيلومتر
  const dLat = (lat2 - lat1) * Math.PI / 180;
  const dLng = (lng2 - lng1) * Math.PI / 180;
  const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
    Math.sin(dLng/2) * Math.sin(dLng/2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  return R * c;
}

// دالة للعثور على أقرب المتاجر
function findNearestStores(userLat, userLng, stores, maxDistance = 10) {
  return stores
    .map(store => ({
      ...store,
      distance: calculateDistance(userLat, userLng, store.lat, store.lng)
    }))
    .filter(store => store.distance <= maxDistance)
    .sort((a, b) => a.distance - b.distance);
}

// تصدير البيانات للاستخدام في الملفات الأخرى
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    jordanCoordinates,
    getGovernorateCoordinates,
    getAreaCoordinates,
    calculateDistance,
    findNearestStores
  };
}

